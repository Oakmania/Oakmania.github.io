<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Learning JavaScript and AJAX">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX Applications</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f4f4f4;
            color: #333;
        }

        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
        }

        h1, h2 {
            color: #333;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #218838;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        @media screen and (max-width: 600px) {
            .container {
                width: 100%;
            }

            table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>

    <h1>Homework 8 - AJAX Application</h1>
    <a href="https://oakmania.github.io/hw1.html">Back to Main Page</a>
    
    <button type="button" onclick="loadDoc()">Get CD collection</button>
    <br><br>
    <table id="demo"></table>

    <script>
        function loadDoc() {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function() {
                myFunction(this);
            }
            xhttp.open("GET", "cd_catalog.xml");
            xhttp.send();
        }
        function myFunction(xml) {
            const xmlDoc = xml.responseXML;
            const x = xmlDoc.getElementsByTagName("CD");
            let table="<tr><th>Artist</th><th>Title</th></tr>";
            for (let i = 0; i <x.length; i++) { 
                table += "<tr><td>" +
                x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
                "</td><td>" +
                x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
                "</td></tr>";
            }
            document.getElementById("demo").innerHTML = table;
        }
    </script>

    <div class="container">
        <ul>
            <li>
                <h2>Explanation of AJAX</h2>
                <p>In this webpage, an AJAX call is executed through JavaScript to fetch data from an XML file, specifically designed for a dynamic and responsive user experience. This process is initiated when the user clicks the "Get CD collection" button, triggering the loadDoc() function. This function creates an XMLHttpRequest object, xhttp, which is a core component of AJAX used for making HTTP requests. It's set up to retrieve data from "cd_catalog.xml" using a GET request. The request is sent using the xhttp.send() method, and upon successful completion, the myFunction() is invoked with the server's response.</p>
                <p>The myFunction(xml) handles the processing of the received XML data. It iterates through the XML document, extracting information about each CD, specifically the artist and title from the "ARTIST" and "TITLE" tags. This data is then used to construct a string that forms the HTML table rows, displaying each CD's details. This string is subsequently inserted into the HTML document within the element having the ID "demo". This technique of updating the webpage's content dynamically, without a full page reload, showcases the essence of AJAX, enabling a seamless and interactive user experience on the web page.</p>
            </li>
            
            <li>
                <h2>REST API</h2>
                <p>PLACEHOLDER</p>
            </li>
        </ul>
    </div>
</body>
</html>

